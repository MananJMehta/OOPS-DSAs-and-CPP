<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
<meta name="Version" content="0.3"/>
<meta name="Submission" content="16100102332727438588142334783"/>
<meta name="Problem" content="1609262412ef8zb7r7fb7wdq8umbhj3e38w"/>
<meta name="Level" content="1"/>
<meta name="Time" content="2016-10-01T02:33:44Z"/>
<meta name="ID" content="WidgetReport"/>
<meta name="User" content="16090906017281418617251020174"/>
<meta name="Elapsed" content="24776 ms"/>
<style type="text/css">
.header {font-weight: bold; font-size: 1.2em; }
.item {font-weight: bold;}
.pass {color: green;}
.fail {color: red;}
table.file td {padding-right: 1em; background: #FFF; }
.linenumber {color: gray;}
.footnote {font-size: 0.7em;}
table {font-size: 0.9em;}
td, th { background: #EEE; margin: 0.5em; padding: 0.25em;}
table.output td {vertical-align: top;}
div.footnotes { border-top: 1px solid gray; padding-top: 0.5em; }
</style>
<title>Report</title>
</head>
<body>
<p class="header run">Testing WidgetReport.cpp</p>
<p class="caption">Input:</p>
<pre class="output"> STATE PLANT  DEPT EMPID COUNT  NAME

    12    34    56   789     4  George Carter
    12    34    56   799     6  Mary Clinton

                            10  TOTAL FOR DEPT  56 *

    12    34    57   639     8  Alfred Lincoln

                             8  TOTAL FOR DEPT  57 *
                            18  TOTAL FOR Plant 34 **

    12    40    57   710     8  Kim Kennedy
    12    40    57   990     6  Jina Johnson

                            14  TOTAL FOR DEPT  57 *

    12    40    75   426    10  Ruby Roosevelt
    12    40    75   551     7  John Washington

                            17  TOTAL FOR DEPT  75 *
                            31  TOTAL FOR Plant 40 **
                            49  TOTAL FOR STATE 12 ***

    33    22    11   297    10  Hilda Hoover
    33    22    11   428    11  Ted Truman
    33    22    11   808     3  Nora Nixon

                            24  TOTAL FOR DEPT  11 *

    33    22    14   629     9  Mabel Bush

                             9  TOTAL FOR DEPT  14 *
                            33  TOTAL FOR Plant 22 **

    33    27    19   321     5  Chris Adams

                             5  TOTAL FOR DEPT  19 *
                             5  TOTAL FOR Plant 27 **
                            38  TOTAL FOR STATE 33 ***

                            87  GRAND TOTAL        ****

</pre>
<span class="pass">pass </span><p class="header studentFiles">Student files</p>
<p class="caption">WidgetReport.cpp:</p>
<pre>#include &lt;iostream&gt;
#include &lt;fstream&gt;
#include &lt;sstream&gt;
#include &lt;iomanip&gt;
using namespace std;

class WidgetReport
{
public:

	
	
	WidgetReport(ifstream&amp; in);  
								 
	void printline(int a,int countdept,int countplant,int countstate);
	void readfile(ifstream&amp; in);
	int getstate1();
	int getstate2();
	int getplant1();
	int getplant2();
	int getdept1();
	int getdept2();
private:
	ifstream&amp; input;  // reference to the input stream
	int state1;
	int state2;
	int plant1;
	int plant2;
	int dept1;
	int dept2;
	int count1;
	int count2;
	int empid1;
	int empid2;
	string fname;
	string sname;
};

const string INPUT_FILE_NAME = "widgets.txt";

int main()
{
	string line;
	ifstream input;
	input.open(INPUT_FILE_NAME);
	if (input.fail())
	{
		cout &lt;&lt; "Failed to open " &lt;&lt; INPUT_FILE_NAME &lt;&lt; endl;
		return -1;
	}

	

	WidgetReport hello(input);
	hello.readfile(input);


	input.close();
	return 0;
}

void WidgetReport::readfile(ifstream&amp; in)
{
	string s;

	int x = 0, y = 0;
	int countDT = 0;
	int countPT = 0;
	int countST = 0;
	int countT = 0;
	while (getline(input, s))
	{
		stringstream ss;
		

		if (x == 1)
		{

			ss &lt;&lt; s;
			ss &gt;&gt; state2;
			ss &gt;&gt; plant2;
			ss &gt;&gt; dept2;
			ss &gt;&gt; empid2;
			ss &gt;&gt; fname;
			ss &gt;&gt; sname;
			ss &gt;&gt; count2;
			
			
			//control logic
			if (state2 == state1)
			{
				countST += count2;
				if (plant2 == plant1)
				{
					countPT += count2;
					if (dept2 == dept1)
					{
						countDT += count2;
						printline(1, 0, 0, 0);
					}
					else
					{
						
						printline(2, countDT, 0, 0);
						countDT = count2;
						printline(1, 0, 0, 0);
					}
				}
				else
				{
					
					printline(2, countDT, countPT, 0);
					countDT = count2;
					countPT = count2;
					printline(1, 0, 0, 0);
				}
			}
			else
			{
				
				printline(2,countDT,countPT,countST);
				countT = countST;
				countDT = count2;
				countPT = count2;
				countST = count2;
				printline(1,0,0,0);
			}
		
		
		state1 = state2;
		plant1 = plant2;
		dept1 = dept2;

	}
		else if (y == 1)
		{
			ss &lt;&lt; s;
			ss &gt;&gt; state1;
			ss &gt;&gt; plant1;
			ss &gt;&gt; dept1;
			ss &gt;&gt; empid1;
			ss &gt;&gt; fname;
			ss &gt;&gt; sname;
			ss &gt;&gt; count1;
			cout &lt;&lt;setw(6)&lt;&lt; state1 &lt;&lt;  setw(6) &lt;&lt; plant1 &lt;&lt;  setw(6) &lt;&lt; dept1 &lt;&lt;  setw(6) &lt;&lt; empid1 &lt;&lt;  setw(6) &lt;&lt; count1 &lt;&lt; "  "&lt;&lt;fname &lt;&lt; " " &lt;&lt; sname &lt;&lt; endl;
			
			x = 1;
			countDT += count1;
			countPT += count1;
			countST += count1;
			
		}
		if (y == 0)
		{
			string Tstate, Tplant,Tdept, Tempid, Tname, Tcount; //title names;
			ss &lt;&lt; s;
			ss &gt;&gt; Tstate;
			ss &gt;&gt; Tplant;
			ss &gt;&gt; Tdept;
			ss &gt;&gt; Tempid;
			ss &gt;&gt; Tname;
			ss &gt;&gt; Tcount;
			
			cout &lt;&lt;setw(6) &lt;&lt;Tstate&lt;&lt;setw(6)&lt;&lt;Tplant &lt;&lt; setw(6) &lt;&lt;Tdept &lt;&lt; setw(6)&lt;&lt;Tempid &lt;&lt;setw(6)&lt;&lt;Tcount &lt;&lt;setw(6)&lt;&lt;Tname &lt;&lt; endl&lt;&lt;endl;
			y = 1;
		}
	}
	countT += countST;

	printline(2, countDT, countPT, countST);
	cout.width(30);
	cout &lt;&lt; right &lt;&lt; countT&lt;&lt;setw(13) &lt;&lt; "  GRAND TOTAL " &lt;&lt;setw(6)&lt;&lt;" " &lt;&lt; " ****" &lt;&lt; endl &lt;&lt; endl;
}

WidgetReport::WidgetReport(ifstream&amp; in) :input(in)
{
	// line for line "translation"
	state1 = state2 = plant1 = plant2 = dept1 = dept2 = 0;

	}
void WidgetReport :: printline(int a, int countdept, int countplant, int countstate)
{
	if(a==1)
	cout &lt;&lt; setw(6)&lt;&lt;state2 &lt;&lt;  setw(6) &lt;&lt; plant2 &lt;&lt;  setw(6) &lt;&lt; dept2 &lt;&lt;  setw(6) &lt;&lt; empid2  &lt;&lt; setw(6) &lt;&lt; count2 &lt;&lt; "  " &lt;&lt; fname &lt;&lt; " " &lt;&lt; sname &lt;&lt; endl;
	if (a == 2)
	{
		cout &lt;&lt; endl;
		cout.width(30);
		cout &lt;&lt; right &lt;&lt; countdept &lt;&lt;setw(13)&lt;&lt; "  TOTAL FOR DEPT " &lt;&lt; right &lt;&lt;setw(3)&lt;&lt;dept1 &lt;&lt; " *" &lt;&lt; endl;
		if (countplant != 0)
		{
			cout.width(30);
			cout &lt;&lt; right &lt;&lt; countplant &lt;&lt; setw(13) &lt;&lt; "  TOTAL FOR Plant " &lt;&lt; right &lt;&lt;setw(2)&lt;&lt;plant1 &lt;&lt; " **" &lt;&lt; endl;
			if (countstate != 0)
			{
				cout.width(30);
				cout &lt;&lt; right &lt;&lt; countstate &lt;&lt; setw(13) &lt;&lt; "  TOTAL FOR STATE " &lt;&lt; right&lt;&lt;setw(2) &lt;&lt; state1 &lt;&lt; " ***" &lt;&lt; endl ;
			}
		}
		cout &lt;&lt; endl;
	}
	
}
int WidgetReport::getstate1()
{
	return state1;
}
int WidgetReport::getstate2()
{
	return state2;
}

int WidgetReport::getplant1()
{
	return plant1;
}

int WidgetReport::getplant2()
{
	return plant2;
}

int WidgetReport::getdept1()
{
	return dept1;
}
int WidgetReport::getdept2()
{
	return dept2;
}
</pre>
<p class="header providedFiles">Provided files</p>
<p class="caption">widgets.txt:</p>
<pre>STATE PLANT DEPT EMPID NAME COUNT
12 34 56 789 George Carter 4
12 34 56 799 Mary Clinton 6
12 34 57 639 Alfred Lincoln 8
12 40 57 710 Kim Kennedy 8
12 40 57 990 Jina Johnson 6
12 40 75 426 Ruby Roosevelt 10
12 40 75 551 John Washington 7
33 22 11 297 Hilda Hoover 10
33 22 11 428 Ted Truman 11
33 22 11 808 Nora Nixon 3
33 22 14 629 Mabel Bush 9
33 27 19 321 Chris Adams 5
</pre>
<p class="header score">Score</p>
<p class="score">1/1</p>
<p class="download"><a href="WidgetReport.signed.zip">Download</a></p>
<div class="footnotes"><div class="footnote">2016-10-01T02:33:44Z</div>
</div>
</body></html>
